---
// src/pages/articulos.astro

import Card from "../components/Card.astro";
import Layout from "../layouts/Layout.astro";
// Importa la función `getCollection` de astro:content
import { getCollection } from "astro:content";

const pageTitle = "Artículos";

// Obtiene todos los artículos de la colección 'blog'
const allPosts = await getCollection("blog");

// Opcional: Ordena los posts por fecha, del más reciente al más antiguo
allPosts.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<Layout pageTitle={pageTitle}>
  <section class="grid grid-cols-1 lg:grid-cols-2 justify-center items-center m-10 lg:m-20">
    {
      allPosts.map((post) => (
        <Card
          url={`/blog/${post.slug}`}
          title={post.data.title}
          description={post.data.description}
          image={post.data.image}
        />
      ))
    }
  </section>
</Layout>
